<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Compare Production vs Local</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f0f0f0;
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    .panel {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h2 {
      margin-top: 0;
      padding-bottom: 10px;
      border-bottom: 2px solid #ddd;
    }
    .success {
      color: green;
    }
    .error {
      color: red;
    }
    iframe {
      width: 100%;
      height: 600px;
      border: 1px solid #ddd;
    }
    pre {
      background: #f5f5f5;
      padding: 10px;
      overflow-x: auto;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <h1>Production vs Local Comparison</h1>
  
  <div class="container">
    <div class="panel">
      <h2>Production (jorgevs.com)</h2>
      <iframe id="prod-frame" src="https://jorgevs.com"></iframe>
      <div id="prod-info"></div>
    </div>
    
    <div class="panel">
      <h2>Local (localhost:8080)</h2>
      <iframe id="local-frame" src="http://localhost:8080"></iframe>
      <div id="local-info"></div>
    </div>
  </div>

  <div style="margin-top: 20px;">
    <h2>Direct Asset Tests</h2>
    <div id="asset-tests"></div>
  </div>

  <script>
    // Test loading assets directly
    async function testAssets() {
      const assets = [
        { type: 'css', path: '/assets/css/main-v3-clean.css' },
        { type: 'js', path: '/assets/js/main.js' },
        { type: 'image', path: '/assets/images/2024/04/110.jpg' },
        { type: 'image', path: '/assets/images/bg-geo/r001-004.jpg' },
        { type: 'font', path: '/assets/fonts/inter/Inter-VariableFont_slnt,wght.woff2' }
      ];

      let html = '<table border="1" cellpadding="5" style="width:100%">';
      html += '<tr><th>Asset</th><th>Production</th><th>Local</th></tr>';

      for (const asset of assets) {
        html += '<tr>';
        html += `<td>${asset.path}</td>`;
        
        // Test production
        const prodUrl = `https://jorgevs.com${asset.path}`;
        const prodResult = await testUrl(prodUrl);
        html += `<td class="${prodResult.success ? 'success' : 'error'}">${prodResult.status}</td>`;
        
        // Test local
        const localUrl = `http://localhost:8080${asset.path}`;
        const localResult = await testUrl(localUrl);
        html += `<td class="${localResult.success ? 'success' : 'error'}">${localResult.status}</td>`;
        
        html += '</tr>';
      }
      
      html += '</table>';
      document.getElementById('asset-tests').innerHTML = html;
    }

    async function testUrl(url) {
      try {
        const response = await fetch(url, { mode: 'no-cors' });
        return { success: true, status: '✓ Loaded' };
      } catch (error) {
        return { success: false, status: `✗ ${error.message}` };
      }
    }

    // Check iframe content after loading
    setTimeout(() => {
      try {
        const prodFrame = document.getElementById('prod-frame');
        const localFrame = document.getElementById('local-frame');
        
        // Try to access iframe content (may fail due to CORS)
        try {
          const prodDoc = prodFrame.contentDocument || prodFrame.contentWindow.document;
          const prodBody = prodDoc.body;
          document.getElementById('prod-info').innerHTML = '<p class="success">Production iframe loaded</p>';
        } catch (e) {
          document.getElementById('prod-info').innerHTML = '<p>Cannot access production iframe (CORS)</p>';
        }
        
        try {
          const localDoc = localFrame.contentDocument || localFrame.contentWindow.document;
          const localBody = localDoc.body;
          const localStyles = localDoc.documentElement.style;
          
          // Get CSS variables
          const bgImage = localStyles.getPropertyValue('--bg-image');
          const textColor = localStyles.getPropertyValue('--text-color');
          
          document.getElementById('local-info').innerHTML = `
            <p class="success">Local iframe accessible</p>
            <p>Background image: ${bgImage || 'NOT SET'}</p>
            <p>Text color: ${textColor || 'NOT SET'}</p>
          `;
        } catch (e) {
          document.getElementById('local-info').innerHTML = '<p class="error">Cannot access local iframe</p>';
        }
      } catch (error) {
        console.error('Frame check error:', error);
      }
    }, 3000);

    // Run tests
    testAssets();
  </script>
</body>
</html>